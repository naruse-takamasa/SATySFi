# SATySFi入門

## はじめに

ここではSATySFiの基本的なことをThe SATySFi bookを読みながら勉強します.
inputだけだと忘れるので重要だと思ったことをメモしていく感じです.
Chapter 1はやりません.

## Chapter 2 (SATySFi簡易入門)

### ファイルの種別と拡張子
* 文書ファイル : 文章の内容を記述(.saty)
* パッケージファイル : コマンド定義などを記述(.satyh)
    * クラスファイル : 文書全体のマークアップや体裁を記述

documentより手前の部分をプリアンブルと呼ぶ

#### `@require: (パッケージ名)`
インストールされたパッケージを読み込む(拡張子は書かなくていい)

#### `@import: (ファイルへの相対パス)`
ローカルなパッケージや分割ファイルを読み込む(拡張子は書かなくていい)

### 文書構造
#### `(| ... |)`
タイトルや著者名を書く

#### `'< ... >`
本文

* SATySFiでの文書の記述
    * ブロックテキスト : ページ方向に積み重なるもの(縦?) : `< ... >`
    * インラインテキスト : 文字の進行方向に積み重なるもの(横?) : `{ ... }`

### 段落

段落は"文字の連なりを受け取ってページ方向に連なる行のリストにするもの"と捉える.すると、段落はインラインテキストを引数に取り、ブロックを返すコマンドととれる.

#### `+p{ ... }`
一つの段落の文書

#### ブロックコマンド
ブロックテキスト内で使うコマンド、すなわちブロックを返すコマンドは名前が`+`から始まる
#### インラインコマンド
インラインテキスト内で使うコマンドは`\`で始まる

コマンドに与える引数は
* `( ... )` : 式引数 (例外あり)
* `< ... >` : ブロック引数
* `{ ... }` : インライン引数
の三種類

#### コマンドの適用
コマンドに引数を与えること

#### `cmd[( ... )]*(; | [( < ... > | { ... } )]*)`
コマンドの正規表現
要は、コマンドの適用はコマンドの後ろに式引数が0個以上並び、その後ろに`;`かインライン引数かブロック引数が来て終わる

`< ... >`はブロックコマンドの適用の0個以上の列

`{ ... }`は通常の文字列とインラインコマンドの適用とが書ける

#### 特殊文字

`` { } < > | % * ; # $ \ ` ``

これらの文字は`\`をつけて表記すること

### 章節

`+chapter`,`+section`,`+subsection`を使う

```
+chapter{(章題)}<
    (内容)
>
```
こんな感じ

#### 新出単語

`\dfn{(単語)}`

#### 文中数式

インラインテキスト中に`${ ... }`で書ける

数式中のコマンドを数式コマンドと言い、インラインコマンド同様`\`で始まる

#### 別行立て数式

`\eqn(${ ... });`

位置を揃えたい場合は

```
\align[
    ${| \paren{x - a} \paren{x - b} |= x^2 - a x - b x + a b |};
    ${| |= x^2 - \paren{a + b} + ab |};
];
```
みたいな感じ

`\align[]`みたいにコマンド名の直後に大括弧が来てるけど、これは`\align([])`の略

`[]`はプログラムにおけるリスト

### コメントアウト

`%`

複数行はまだない

### 箇条書き

itemizeパッケージを読み込む

`+listing{ ... }`とか`\listing{ ... }%`

```
+listing{
    * ...
    ** ...
    ** ...
    * ...
}
```

箇条書きでの`{}`はインラインテキストではなく、itemize型という特殊なテキストで通常の文を書くと型エラーとなる

### 定理環境

`+definition{ ... }`,`+lemma{ ... }`,`+theorem{ ... }`  
,`+corollary{ ... }`,`+example{ ... }`

```
+theorem?:({ ... }){
    ...
}
```
こんな感じでタイトルも与えられる.

`?:()`がオプション引数を与える構文

### 脚注

`\footnote{ ... }`

脚注の中に脚注は無理

### 相互参照

オプション引数としてラベルを受け取る事ができる.

```
+chapter?:(`...`){
    ...
}
```

章番号を使うときは
`\ref-chapter(``);`
みたいに

定理とかも2個オプション引数をつけれる

```
+lemma?:({ ... })?:(` ... `){
    ...
}
```

連続するオプション引数で前の引数を省略したいとき
```
+lemma?*?:(` ... `){
    ...
}
```
みたいに`?*`をつかう